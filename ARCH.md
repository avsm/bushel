# Guidelines for the AI copilot editor.

Whenever you generate any new OCaml functions, annotate that function's OCamldoc
with a "TODO:claude" to indicate it is autogenerated. Do this for every function
you generate and not just the header file.

## Project structure

The `bin/bushel_videos.ml` command is intended to query a PeerTube based
endpoint and turn the videos that are found into a directory containing
Bushel.Video.t entries serialised to Yaml (one video per file in that directory).

## Coding Instructions

Read your instructions from this file, and mark successfully completed instructions
with DONE so that you will know what to do next when reinvoked in the future.

1. DONE. Add a toplevel Peertube module and opam package that can parse the JSON peertube API responses
   in JSON and turn them into an OCaml data structure. You can run 
   "curl https://crank.recoil.org/api/v1/video-channels/anil/videos?count=100"
   to get an example of what the response structures look like.
2. DONE. Add OCaml expect tests into the repository with other sample responses, by querying
   real data from two other peertube sites: https://watch.eeg.cl.cam.ac.uk and
   https://watch.ocaml.org
3. DONE. Add pagination support for the Peertube API, and add suitable tests for it.
4. DONE. Get the complete description of a video out instead of a ... truncated version.
5. DONE. Fix the --overwrite flag so that files are written when it is not specified.
6. Add command line flags for the PeerTube endpoint and the remote channel to query,
   with defaults being https://crank.recoil.org and channel 'anil'.
7. Ensure we are using the pagination API to retrieve all the videos from the endpoint. 
